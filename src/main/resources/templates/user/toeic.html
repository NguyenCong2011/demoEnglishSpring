<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Thư viện đề thi TOEIC</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans text-gray-800">

<!-- Header -->
<div th:replace="~{header.html}"></div>

<!-- Main Content -->
<div class="max-w-7xl mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-6">📚 Thư viện đề thi</h1>

  <!-- Danh mục đề thi -->
  <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 mb-8">
    <a href="/online-tests" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">Tất cả</a>
    <a href="/ielts-academic" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">IELTS Academic</a>
    <a href="/ielts-general" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">IELTS General</a>
    <a href="/user/toeic" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">TOEIC</a>
    <a href="/hsk-1" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">HSK 1</a>
    <a href="/hsk-2" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">HSK 2</a>
    <a href="/hsk-3" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">HSK 3</a>
    <a href="/hsk-4" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">HSK 4</a>
    <a href="/hsk-5" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">HSK 5</a>
    <a href="/hsk-6" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">HSK 6</a>
    <a href="/topik-i" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">TOPIK I</a>
    <a href="/topik-ii" class="bg-white shadow-sm border rounded-lg py-3 text-center hover:bg-blue-600 hover:text-white">TOPIK II</a>
  </div>

  <!-- Ô tìm kiếm -->
  <div class="mb-8">
    <input type="text" id="search" placeholder="🔍 Tìm kiếm theo tên đề, mô tả..." class="w-full border rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500" />
    <button onclick="searchTest()" class="mt-3 px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Tìm kiếm</button>
    <div id="search-results" class="mt-4"></div>
  </div>

  <!-- Tổng số bài thi -->
  <div class="mb-4 text-lg">
    <strong>Tổng số đề thi:</strong> <span th:text="${listToeicExams.totalElements}"></span>
  </div>

  <!-- Danh sách đề thi -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div th:each="toeicExam : ${listToeicExams.content}" class="bg-white border rounded-lg p-5 shadow hover:shadow-lg transition">
      <a th:href="@{/user/toeic-detail/{examId}(examId=${toeicExam.examId})}" class="block space-y-2">
        <h3 class="text-xl font-semibold text-blue-600" th:text="${toeicExam.examName}">Tên đề</h3>
        <p><strong>🕒 Thời lượng:</strong> <span th:text="${toeicExam.duration}"></span> phút</p>
        <p><strong>👥 Số người tham gia:</strong> <span th:text="${toeicExam.numOfParticipants}"></span></p>
        <p><strong>📘 Số phần:</strong> <span th:text="${toeicExam.numOfSections}"></span></p>
        <p><strong>❓ Số câu hỏi:</strong> <span th:text="${toeicExam.numOfQuestions}"></span></p>
        <p><strong>📝 Mô tả:</strong> <span th:text="${toeicExam.description}"></span></p>
        <div>
          <strong>💬 Bình luận:</strong>
          <ul class="list-disc list-inside text-sm text-gray-600 mt-1">
            <li th:each="comment : ${toeicExam.comments}" th:text="${comment}"></li>
          </ul>
        </div>
      </a>
    </div>
  </div>

  <!-- Pagination -->
  <div class="flex justify-center mt-10" th:if="${listToeicExams.totalElements > 0}">
    <div class="flex space-x-2">
      <a th:each="pageNum : ${#numbers.sequence(1, listToeicExams.totalPages)}"
         th:href="@{/user/toeic(pageNo=${pageNum})}"
         th:text="${pageNum}"
         th:classappend="${pageNum == currentPage} ? 'bg-blue-600 text-white' : 'bg-white'"
         class="px-4 py-2 rounded-lg border hover:bg-blue-600 hover:text-white transition"></a>
    </div>
  </div>
</div>

<!-- Footer -->
<div th:replace="~{footer.html}"></div>

</body>
</html>
